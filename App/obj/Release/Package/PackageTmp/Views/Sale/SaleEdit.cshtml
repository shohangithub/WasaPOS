@model Model.ViewModels.SaleViewModels
@{
    ViewBag.Title = "SaleEdit";
   
}
<form class="form-horizontal" role="form">
    <div class="col-xs-8 ">
        <div class="widget-box">
            <div class="widget-body">
                <div class="widget-main">

                    <input type="hidden" id="SaleId" value="@Model.SaleId" />
                    <div class="row">
                        <div class="col-xs-12 ">
                            <div class="widget-box ">

                                <div class="widget-header">
                                    <h4 class="widget-title" style="color:black">Sales In Edit Entry</h4>
                                </div>
                                <div class="widget-body">
                                    <div class="widget-main">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label no-padding-right" for="Phone">Invoice No :</label>

                                                    <div class="col-sm-8">
                                                        <input type="text" id="InvoiceId" name="InvoiceId" value="@Model.InvoiceId" class="form-control" readonly />

                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label no-padding-right" for="contact_persion">Customer Name</label>
                                                    <div class="col-sm-8">
                                                        @Html.DropDownList("CustomerId", (SelectList)ViewData["Customer"], "Select ", new { @onchange = "get_data()", id = "CustomerId", @class = "form-control selectpicker" })
                                                        <span class="CustomerId text-danger">Customer Name no required</span>

                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label no-padding-right" for="AddressLine1"> Address</label>

                                                    <div class="col-sm-8">
                                                        <input type="text" id="AddressLine1" name="AddressLine1" value="@Model.AddressLine1" class="form-control" />

                                                    </div>
                                                </div>


                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="col-sm-5 control-label no-padding-right" for="Phone"> Phone</label>

                                                    <div class="col-sm-7">
                                                        <input type="text" id="Phone" name="Phone" value="@Model.Phone" class="form-control" />

                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-5 control-label no-padding-right" for="SaleDate">Sale Date</label>
                                                    <div class="col-sm-7">
                                                        <div class='input-group date' id='datetimepicker'>
                                                            <input type="text" class="form-control" id="SaleDate" value="@Convert.ToDateTime(Model.SaleDate).ToString("yyyy-MM-dd")" name="SaleDate" tabindex="2" />
                                                            <span class="input-group-addon">
                                                                <span class="glyphicon glyphicon-calendar"></span>
                                                            </span>
                                                        </div>
                                                        <span class="SaleDate text-danger">Sales Date no required</span>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-5 control-label no-padding-right" for="Phone">Last Production Date :</label>

                                                    <div class="col-sm-7">
                                                        <input type="text" id="InvoiceId" name="InvoiceId" value="@ViewBag.ProductionDate" class="form-control" readonly style="color:red; font-weight:800" />

                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 ">
                            <table id="dynamic-table" class="table table-responsive">
                                <thead>
                                    <tr style="background-color:#0094ff; margin-top:20px; color:#fff; text-align:center;">
                                        <th style="width:250px;">Product Name</th>
                                        <th>In Stock </th>
                                        <th>Quantity</th>
                                        <th>Qty Case </th>
                                        <th style="width:100px;">Unit Price</th>
                                        <th>Total Price </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>

                                        <td style="font-weight:800">
                                            <input type="text" id="swml250" class="form-control" value="Shanti Water 250 ML" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="swml250_stock" class="form-control" value="@Model.Swml250CurrentStock" readonly />
                                            <input type="hidden" id="swml250_SaleId" value="@Model.Swml250SaleDetailId" />
                                            
                                        </td>

                                        <td>
                                            <input type="text" id="swml250_quantity" placeholder="Quantity"  value="@Model.Swml250Quintity"  class="form-control" />
                                        </td>
                                        <td>
                                            <input type="text" id="swml250_qty" placeholder="Pc" class="form-control" value="@Model.Swml250QtyCase" readonly />
                                        </td>
                                        <td>
                                            <select class="form-control" id="swml250_unit" >
                                                <option value="7">7</option>
                                                <option value="6">6</option>

                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="swml250_Total_amount" class="form-control" value="@Model.Swml250TotalPrice" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="swml250_Total_sd" class="form-control" value="" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="swml250_Total_vat" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight:800">
                                            <input type="text" id="sw5ml" class="form-control" value="Shanti Water 0.5 L" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw5ml_stock" class="form-control" value="@Model.Sw5mlCurrentStock" readonly />
                                            <input type="hidden" id="sw5ml_SaleId" value="@Model.Sw5mlSaleDetailId" />
                                            
                                        </td>
                                        <td>
                                            <input type="text" id="sw5ml_quantity" placeholder="Quantity" class="form-control" value="@Model.Sw5mlQuintity" tabindex="4" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw5ml_qty" placeholder="Pc" class="form-control" value="@Model.Sw5mlQtyCase" readonly />
                                        </td>
                                        <td>
                                            <select class="form-control" id="sw5ml_unit" >
                                                <option value="10">10</option>
                                                <option value="9">9</option>

                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw5ml_Total_amount" class="form-control" value="@Model.Sw5mlTotalPrice" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw5ml_Total_sd" class="form-control" value="" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw5ml_Total_vat" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight:800">
                                            <input type="text" id="sw1l" class="form-control" value="Shanti Water 1.0 L" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw1l_stock" class="form-control" value="@Model.Sw1lCurrentStock" readonly />
                                            <input type="hidden" id="sw1l_SaleId" value="@Model.Sw1lSaleDetailId" />
                                           
                                        </td>
                                        <td>
                                            <input type="text" id="sw1l_quantity" placeholder="Quantity" class="form-control" value="@Model.Sw1lQuintity" tabindex="5" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw1l_qty" placeholder="Pc" class="form-control" value="@Model.Sw1lQtyCase" readonly />
                                        </td>
                                        <td>
                                            <select class="form-control" id="sw1l_unit">
                                                <option value="15">15</option>
                                                <option value="13">13</option>

                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw1l_Total_amount" class="form-control" value="@Model.Sw1lTotalPrice" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw1l_Total_sd" class="form-control" value="" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw1l_Total_vat" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight:800">
                                            <input type="text" id="sw15l" class="form-control" value="Shanti Water 1.5 L" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw15l_stock" class="form-control" value="@Model.Sw15lCurrentStock" readonly />
                                            <input type="hidden" id="sw15l_SaleId" value="@Model.Sw15lSaleDetailId" />
                                            
                                        </td>
                                        <td>
                                            <input type="text" id="sw15l_quantity" placeholder="Quantity" class="form-control" value="@Model.Sw15lQuintity" tabindex="6" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw15l_qty" placeholder="Pc" class="form-control" value="@Model.Sw15lQtyCase" readonly />
                                        </td>
                                        <td>
                                            <select class="form-control" id="sw15l_unit">
                                                <option value="18">18</option>
                                                <option value="16">16</option>

                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw15l_Total_amount" class="form-control" value="@Model.Sw15lTotalPrice" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw15l_Total_sd" class="form-control" value="" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw15l_Total_vat" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight:800">
                                            <input type="text" id="sw2l" class="form-control" value="Shanti Water 2.0 L" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw2l_stock" class="form-control" value="@Model.Sw2lCurrentStock" readonly />
                                            <input type="hidden" id="sw2l_SaleId" value="@Model.Sw2lSaleDetailId" />
                                            
                                        </td>
                                        <td>
                                            <input type="text" id="sw2l_quantity" placeholder="Quantity" class="form-control" value="@Model.Sw2lQuintity" tabindex="7" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw2l_qty" placeholder="Pc" class="form-control" value="@Model.Sw2lQtyCase" readonly />
                                        </td>
                                        <td>
                                            <select class="form-control" id="sw2l_unit">
                                                <option value="22">22</option>
                                                <option value="20">20</option>

                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw2l_Total_amount" class="form-control" value="@Model.Sw2lTotalPrice" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw2l_Total_sd" class="form-control" value="" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw2l_Total_vat" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight:800">
                                            <input type="text" id="sw5l" class="form-control" value="Shanti Water 5.0 L" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw5l_stock" class="form-control" value="@Model.Sw5lCurrentStock" readonly />
                                            <input type="hidden" id="sw5l_SaleId" value="@Model.Sw5lSaleDetailId" />
                                            
                                        </td>
                                        <td>
                                            <input type="text" id="sw5l_quantity" placeholder="Quantity" class="form-control" value="@Model.Sw5lQuintity" tabindex="8" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw5l_qty" placeholder="Pc" class="form-control" value="@Model.Sw5lQtyCase" readonly />
                                        </td>
                                        <td>
                                            <select class="form-control" id="sw5l_unit">
                                                <option value="45">45</option>
                                                <option value="40">40</option>

                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw5l_Total_amount" class="form-control" value="@Model.Sw5lTotalPrice" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw5l_Total_sd" class="form-control" value="" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw5l_Total_vat" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight:800">
                                            <input type="text" id="sw20l" class="form-control" value="Shanti Water 20.0 L 30TK " readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw20l_stock" class="form-control" value="@Model.Sw20lCurrentStock" readonly />
                                            <input type="hidden" id="sw20l_SaleId" value="@Model.Sw20lSaleDetailId" />
                                           
                                        </td>
                                        <td>
                                            <input type="text" id="sw20l_quantity" placeholder="Quantity" class="form-control" value="@Model.Sw20lQuintity" tabindex="9" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw20l_qty" placeholder="Pc" class="form-control" value="@Model.Sw20lQtyCase" readonly />

                                        </td>
                                        <td>
                                            <select class="form-control" id="sw20l_unit">
                                                <option value="30">30</option>
                                                

                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw20l_Total_amount" class="form-control" value="@Model.Sw20lTotalPrice" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw20l_Total_sd" class="form-control" value="" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw20l_Total_vat" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight:800">
                                            <input type="text" id="sw20l4" class="form-control" value="Shanti Water 20.0 L 40Tk" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw20l4_stock" class="form-control" value="@Model.Sw20l4CurrentStock" readonly />
                                            <input type="hidden" id="Sw20l4SaleDetailId" value="@Model.Sw20l4SaleDetailId" />
                                            
                                        </td>
                                        <td>
                                            <input type="text" id="sw20l4_quantity" placeholder="Quantity" class="form-control" value="@Model.Sw20l4Quintity" tabindex="9" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw20l4_qty" placeholder="Pc" class="form-control" value="@Model.Sw20l4QtyCase" readonly />

                                        </td>
                                        <td>
                                            <select class="form-control" id="sw20l4_unit">
                                                <option value="40">40</option>
                                               
                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw20l4_Total_amount" class="form-control" value="@Model.Sw20l4TotalPrice" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw20l4_Total_sd" class="form-control" value="" readonly />
                                        </td>
                                        <td style="display:none">
                                            <input type="text" id="sw20l4_Total_vat" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight:800">
                                            <input type="text" id="others" class="form-control" value="Wrapping Charge/Others" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="others_stock" class="form-control" value="0" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="others_quantity" placeholder="Quantity" class="form-control" value="" tabindex="10" />
                                        </td>
                                        <td>
                                            <input type="text" id="others_qty" placeholder="Pc" class="form-control" value="" readonly />

                                        </td>
                                        <td>
                                            <input type="text" id="others_unit" placeholder="Price" class="form-control" value="0" />
                                        </td>
                                        <td>
                                            <input type="text" id="others_Total_amount" class="form-control" value="" readonly />
                                        </td>

                                    </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-4">
        <div class="widget-box ">
            <div class="widget-header">
                <h4 class="widget-title">Summary</h4>
            </div>

            <div class="widget-body">
                <div class="widget-main">

                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="STAmount"> Total(Tk)</label>

                        <div class="col-sm-6">
                            <input type="text" id="STAmount" name="STAmount" class="form-control" value="@Model.STAmount" readonly />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="TSSD"> Where SD</label>

                        <div class="col-sm-6">
                            <input type="text" id="TSSD" class="form-control" value="@Model.TSSD" readonly />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="TSVat"> & VAT</label>

                        <div class="col-sm-6">
                            <input type="text" id="TSVat" class="form-control" value="@Model.TSVat" readonly />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="TransportCost">(+)Transport/Labour</label>

                        <div class="col-sm-6">
                            <input type="text" id="TransportCost" onkeyup="CalculateSummaryAmount()" value="@Model.TransportCost" class="form-control" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="Discount">(-)Discount (%)</label>

                        <div class="col-sm-3" style="padding-left:11px!important;padding-right:3px!important;">
                            <input type="text" id="Discount" onkeyup="CalculateSummaryAmount()" value="@Model.Discount" class="form-control" />

                        </div>
                        <div class="col-sm-3" style="padding-left:0px!important;padding-right:11px!important;">

                            <input type="text" id="DiscountAmount" onkeyup="CalculateSummaryAmountbytk()" value="@Model.DiscountAmount" class="form-control" />
                        </div>


                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="NetTotal">Net Total(Tk)</label>

                        <div class="col-sm-6">
                            <input type="text" id="NetTotal" class="form-control" value="@Model.NetTotal" readonly />

                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="CashReceive">Given(Tk)</label>

                        <div class="col-sm-6">
                            <input type="text" id="CashReceive" class="form-control" value="@Model.CashReceive" />

                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="DueAmount">Due/Change(Tk)</label>

                        <div class="col-sm-6">
                            <input type="text" id="DueAmount" class="form-control" readonly value="@Model.DueAmount" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="ChangeAmount">Change(Tk)</label>

                        <div class="col-sm-6">
                            <input type="text" id="ChangeAmount" class="form-control" readonly value="0" />
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-xs-12">
                            <input id="submit" type="button" value="Update" class="btn-save pull-right btn_hide" />
                            <input id="SaveandPrint" type="button" value="Update &amp; Print" class="btn-save-print pull-right btn_hide" />

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<script type="text/javascript">
    $(document).ready(function () {

        $("Select").attr('data-live-search', true);

    });
    function get_data() {
        var CustomerId = $("#CustomerId").val();
        data = {
            "CustomerId": CustomerId
        };
        if (CustomerId >=1){
            $.ajax({
                url: '/Customer/GetCustomerIfon',
                type: "POST",
                data: JSON.stringify(data),
                dataType: "JSON",
                contentType: 'application/json; charset=utf-8',
                cache: false,
                success: function (d) {
                    $("#AddressLine1").val(d.AddressLine1);
                    $("#address").val(d.PressentAddress);
                    $("#Phone").val(d.Phone);
                },
                error: function (d) {
                    alert("Failed......");
                }
                //alert(ac_numb);
            });
        }

    }
    $(document).ready(function () {
        $('#datetimepicker').datetimepicker({
            format: 'YYYY-MM-DD'
        });

        $("#swml250_unit").on('change', function () {
            var swml250_quantity = parseInt($("#swml250_quantity").val());
            var swml250_unit = parseInt($("#swml250_unit").val());
            var swml250_stock = parseInt($("#swml250_stock").val());


            if (swml250_stock >= swml250_quantity) {
                if (swml250_quantity != "") {
                    if (swml250_quantity >= "15") {
                        var modulsqty = swml250_quantity % 15;
                        var diviqty = swml250_quantity / 15;
                        var qty = Math.trunc(diviqty);
                        var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                    }
                    else {
                        var totalqty = 0 + "C" + " " + "&" + " " + swml250_quantity + "Pc"
                    }
                    if (swml250_unit == "6") {
                        tolalPrice = parseInt(swml250_quantity * swml250_unit);
                    }
                    else {
                        tolalPrice = parseInt(swml250_quantity * swml250_unit);
                    }

                    if (swml250_unit == 6) {
                        var vat = swml250_quantity * 1.59;
                    }
                    else {
                        var vat = swml250_quantity * 1.59;
                    }
                    if (swml250_unit == 6) {
                        var sd = swml250_quantity * .29;
                    }
                    else {
                        var sd = swml250_quantity * .29;
                    }



                    $("#swml250_Total_vat").val(parseFloat(vat).toFixed(2));
                    //ar totalsd = (allPrice / 100) * sdtpercent;
                    $("#swml250_Total_sd").val(parseFloat(sd).toFixed(2));
                    $("#swml250_qty").val(totalqty);
                    $("#swml250_Total_amount").val(tolalPrice);

                }
                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();
            }
            else {
                alert("Stock is not avilable");
                $("#swml250_quantity").val(0);
                $("#swml250_qty").val(0);
                $("#swml250_Total_amount").val(0);
                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();
            }
        });
        $("#sw5ml_unit").on('change', function () {
            var sw5ml_quantity = parseInt($("#sw5ml_quantity").val());
            var sw5ml_unit = parseInt($("#sw5ml_unit").val());
            var sw5ml_stock = parseInt($("#sw5ml_stock").val());
            if (sw5ml_stock >= sw5ml_quantity) {
                if (sw5ml_quantity != "") {
                    if (sw5ml_quantity >= "12") {
                        var modulsqty = sw5ml_quantity % 12;
                        var diviqty = sw5ml_quantity / 12;
                        var qty = Math.trunc(diviqty);
                        var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                    }
                    else {
                        var totalqty = 0 + "C" + " " + "&" + " " + sw5ml_quantity + "Pc"
                    }
                    if (sw5ml_unit == "9") {
                        tolalPrice = parseInt(sw5ml_quantity * sw5ml_unit);
                    }
                    else {
                        tolalPrice = parseInt(sw5ml_quantity * sw5ml_unit);
                    }

                    if (sw5ml_unit == "9") {
                        vat = 1.17 * sw5ml_quantity;
                    }
                    else {
                        vat = 1.17 * sw5ml_quantity;
                    }
                    if (sw5ml_unit == "9") {
                        sd = sw5ml_quantity * .37;
                    }
                    else {
                        sd = sw5ml_quantity * .37;
                    }
                    $("#sw5ml_Total_vat").val(parseFloat(vat).toFixed(2));

                    $("#sw5ml_Total_sd").val(parseFloat(sd).toFixed(2));

                    $("#sw5ml_qty").val(totalqty);
                    $("#sw5ml_Total_amount").val(tolalPrice);

                }
                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();
            }
            else {
                alert("Stock is not avilable");
                $("#sw5ml_quantity").val(0);
                $("#sw5ml_qty").val(0);
                $("#sw5ml_Total_amount").val(0);
                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();
            }
        });
        $("#sw1l_unit").on('change', function () {
            var sw1l_quantity = parseInt($("#sw1l_quantity").val());
            var sw1l_unit = parseInt($("#sw1l_unit").val());
            var sw1l_stock = parseInt($("#sw1l_stock").val());
            if (sw1l_stock >= sw1l_quantity) {
                if (sw1l_quantity != "") {
                    if (sw1l_quantity >= "6") {
                        var modulsqty = sw1l_quantity % 6;
                        var diviqty = sw1l_quantity / 6;
                        var qty = Math.trunc(diviqty);
                        var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                    }
                    else {
                        var totalqty = 0 + "C" + " " + "&" + " " + sw1l_quantity + "Pc"
                    }
                    if (sw1l_unit == "13") {
                        tolalPrice = parseInt(sw1l_quantity * sw1l_unit);
                    }
                    else {
                        tolalPrice = parseInt(sw1l_quantity * sw1l_unit);
                    }



                    if (sw1l_unit == "13") {
                        vat = sw1l_quantity * 1.70;
                    }
                    else {
                        vat = sw1l_quantity * 1.70;
                    }
                    if (sw1l_unit == "13") {
                        sd = sw1l_quantity * 0.54;
                    }
                    else {
                        sd = sw1l_quantity * 0.54;
                    }
                    $("#sw1l_Total_vat").val(parseFloat(vat).toFixed(2));
                    //ar totalsd = (allPrice / 100) * sdtpercent;
                    $("#sw1l_Total_sd").val(parseFloat(sd).toFixed(2));
                    $("#sw1l_qty").val(totalqty);
                    $("#sw1l_Total_amount").val(tolalPrice);

                }
                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();
            }
            else {
                alert("Stock is not avilable");
                $("#sw1l_quantity").val(0);
                $("#sw1l_qty").val(0);
                $("#sw1l_Total_amount").val(0);
                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();
            }
        });
        $("#sw15l_unit").on('change', function () {
            var sw15l_quantity = parseInt($("#sw15l_quantity").val());
            var sw15l_unit = parseInt($("#sw15l_unit").val());
            var sw15l_stock = parseInt($("#sw15l_stock").val());
            if (sw15l_stock >= sw15l_quantity) {
                if (sw15l_quantity != "") {
                    if (sw15l_quantity >= "6") {
                        var modulsqty = sw15l_quantity % 6;
                        var diviqty = sw15l_quantity / 6;
                        var qty = Math.trunc(diviqty);
                        var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                    }
                    else {
                        var totalqty = 0 + "C" + " " + "&" + " " + sw15l_quantity + "Pc"
                    }
                    if (sw15l_unit == "16") {
                        tolalPrice = parseInt(sw15l_quantity * sw15l_unit);
                    }
                    else {
                        tolalPrice = parseInt(sw15l_quantity * sw15l_unit);
                    }

                    if (sw15l_unit == "16") {
                        vat = sw15l_quantity * 2.09;
                    }
                    else {
                        vat = sw15l_quantity * 2.09;
                    }
                    if (sw15l_unit == "16") {
                        sd = sw15l_quantity * 0.66;
                    }
                    else {
                        sd = sw15l_quantity * 0.66;
                    }
                    $("#sw15l_Total_vat").val(parseFloat(vat).toFixed(2));
                    //ar totalsd = (allPrice / 100) * sdtpercent;
                    $("#sw15l_Total_sd").val(parseFloat(sd).toFixed(2));
                    $("#sw15l_qty").val(totalqty);
                    $("#sw15l_Total_amount").val(tolalPrice);

                }
                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();
            }

            else {
                alert("Stock is not avilable");
                $("#sw15l_quantity").val(0);
                $("#sw15l_qty").val(0);
                $("#sw15l_Total_amount").val(0);
                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();
            }

        });
        $("#sw2l_unit").on('change', function () {
            var sw2l_quantity = parseInt($("#sw2l_quantity").val());
            var sw2l_unit = parseInt($("#sw2l_unit").val());
            var sw2l_stock = parseInt($("#sw2l_stock").val());
            if (sw2l_stock >= sw2l_quantity) {
                if (sw2l_quantity != "") {
                    if (sw2l_quantity >= "6") {
                        var modulsqty = sw2l_quantity % 6;
                        var diviqty = sw2l_quantity / 6;
                        var qty = Math.trunc(diviqty);
                        var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                    }
                    else {
                        var totalqty = 0 + "C" + " " + "&" + " " + sw2l_quantity + "Pc"
                    }
                    if (sw2l_unit == "20") {
                        tolalPrice = parseInt(sw2l_quantity * sw2l_unit);
                    }
                    else {
                        tolalPrice = parseInt(sw2l_quantity * sw2l_unit);
                    }



                    if (sw2l_unit == "20") {
                        vat = sw2l_quantity * 2.61;
                    }
                    else {
                        vat = sw2l_quantity * 2.61;
                    }
                    if (sw2l_unit == "20") {
                        sd = sw2l_quantity * 0.82;
                    }
                    else {
                        sd = sw2l_quantity * 0.82;
                    }
                    $("#sw2l_qty").val(totalqty);
                    $("#sw2l_Total_amount").val(tolalPrice);
                    $("#sw2l_Total_vat").val(parseFloat(vat).toFixed(2));
                    //ar totalsd = (allPrice / 100) * sdtpercent;
                    $("#sw2l_Total_sd").val(parseFloat(sd).toFixed(2));

                }
                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();
            }
            else {
                alert("Stock is not avilable");
                $("#sw2l_quantity").val(0);
                $("#sw2l_qty").val(0);
                $("#sw2l_Total_amount").val(0);
                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();
            }
        });
        $("#sw5l_unit").on('change', function () {
            var sw5l_quantity = parseInt($("#sw5l_quantity").val());
            var sw5l_unit = parseInt($("#sw5l_unit").val());
            var sw5l_stock = parseInt($("#sw5l_stock").val());
            if (sw5l_stock >= sw5l_quantity) {
                if (sw5l_quantity != "") {

                    var totalqty = 0 + "C" + " " + "&" + " " + sw5l_quantity + "Pc"

                    if (sw5l_unit == "40") {
                        tolalPrice = parseInt(sw5l_quantity * sw5l_unit);
                    }
                    else {
                        tolalPrice = parseInt(sw5l_quantity * sw5l_unit);
                    }


                    if (sw5l_unit == "40") {
                        vat = sw5l_quantity * 5.00;
                    }
                    else {
                        vat = sw5l_quantity * 5.00;
                    }

                    $("#sw5l_qty").val(totalqty);
                    $("#sw5l_Total_amount").val(tolalPrice);
                    $("#sw5l_Total_vat").val(parseFloat(vat).toFixed(2));

                }
                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();

            }
            else {
                alert("Stock is not avilable");
                $("#sw5l_quantity").val(0);
                $("#sw5l_qty").val(0);
                $("#sw5l_Total_amount").val(0);
                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();

            }
        });
           
            ////////////////////////////////////////////////////////
            var SaleDetails = [];
            $('.text-danger').hide();
            $('#submit').click(function () {

                var isAllValid = true;
                if ($('#CustomerId').val().trim() == '') {
                    isAllValid = false;
                    $('.CustomerId.text-danger').show();
                }
                else {

                    $('.CustomerId.text-danger').hide();
                }
                if ($('#SaleDate').val().trim() > 0) {
                    isAllValid = false;
                    $('.SaleDate.text-danger').show();
                }
                else {

                    $('.SaleDate.text-danger').hide();
                }
                if (isAllValid) {

                    if ($('#swml250_quantity').val() != "") {
                            SaleDetails.push({
                            SaleDetailId: $('#swml250_SaleId').val().trim(),
                            ProductName: $('#swml250').val().trim(),
                            Quantity: parseInt($('#swml250_quantity').val().trim()),                         
                            QtyCase: $('#swml250_qty').val().trim(),
                            FacePrice: parseInt($('#swml250_unit').val().trim()),
                            TotalPrice: parseInt($('#swml250_Total_amount').val().trim())
                            });
                    }

                    if ($('#sw5ml_quantity').val() != "") {
                        SaleDetails.push({
                            SaleDetailId: $('#sw5ml_SaleId').val().trim(),
                            ProductName: $('#sw5ml').val().trim(),
                            Quantity: parseInt($('#sw5ml_quantity').val()),
                            QtyCase: $('#sw5ml_qty').val().trim(),
                            FacePrice: parseInt($('#sw5ml_unit').val().trim()),
                            TotalPrice: parseInt($('#sw5ml_Total_amount').val().trim())
                        });
                    }

                    if ($('#sw1l_quantity').val() != "" ) {
                        SaleDetails.push({
                            SaleDetailId: $('#sw1l_SaleId').val().trim(),
                            ProductName: $('#sw1l').val().trim(),
                            Quantity: parseInt($('#sw1l_quantity').val().trim()),
                            QtyCase: $('#sw1l_qty').val().trim(),
                            FacePrice: parseInt($('#sw1l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw1l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw15l_quantity').val() != "" ) {
                        SaleDetails.push({
                            SaleDetailId: $('#sw15l_SaleId').val().trim(),
                            ProductName: $('#sw15l').val().trim(),
                            Quantity: parseInt($('#sw15l_quantity').val().trim()),
                            QtyCase: $('#sw15l_qty').val().trim(),
                            FacePrice: parseInt($('#sw15l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw15l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw2l_quantity').val() != "") {
                        SaleDetails.push({
                            SaleDetailId: $('#sw2l_SaleId').val().trim(),
                            ProductName: $('#sw2l').val().trim(),
                            Quantity: parseInt($('#sw2l_quantity').val().trim()),
                            QtyCase: $('#sw2l_qty').val().trim(),
                            FacePrice: parseInt($('#sw2l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw2l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw5l_quantity').val() != "") {
                        SaleDetails.push({
                            SaleDetailId: $('#sw5l_SaleId').val().trim(),
                            ProductName: $('#sw5l').val().trim(),
                            Quantity: parseInt($('#sw5l_quantity').val().trim()),
                            QtyCase: $('#sw5l_qty').val().trim(),
                            FacePrice: parseInt($('#sw5l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw5l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw20l_quantity').val() != "") {
                        SaleDetails.push({
                            SaleDetailId: $('#sw20l_SaleId').val().trim(),
                            ProductName: $('#sw20l').val().trim(),
                            Quantity: parseInt($('#sw20l_quantity').val().trim()),
                            QtyCase: $('#sw20l_qty').val().trim(),
                            FacePrice: parseInt($('#sw20l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw20l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw20l4_quantity').val() != "") {
                        SaleDetails.push({
                            SaleDetailId: $('#Sw20l4SaleDetailId').val().trim(),
                            ProductName: $('#sw20l4').val().trim(),
                            Quantity: parseInt($('#sw20l4_quantity').val().trim()),
                            QtyCase: $('#sw20l4_qty').val().trim(),
                            FacePrice: parseInt($('#sw20l4_unit').val().trim()),
                            TotalPrice: parseInt($('#sw20l4_Total_amount').val().trim())
                        });
                    }
                    if ($('#others_quantity').val() != "") {
                        SaleDetails.push({
                            ProductName: $('#others').val().trim(),
                            Quantity: parseInt($('#others_quantity').val().trim()),
                            QtyCase: $('#others_qty').val().trim(),
                            FacePrice: parseInt($('#others_unit').val().trim()),
                            TotalPrice: parseInt($('#others_Total_amount').val().trim())
                        });
                    }              
                    var data = {
                        
                        SaleId: $('#SaleId').val(),
                        CustomerId: $('#CustomerId').val(),
                        CustomerName: $('#CustomerId').val(),
                        AddressLine1: $('#AddressLine1').val(),
                        Phone: $('#Phone').val(),
                        SaleDate: $('#SaleDate').val(),
                        InvoiceId: $('#InvoiceId').val(),
                        TSSD: $('#TSSD').val(),
                        TSVat: $('#TSVat').val(),
                        STAmount: $('#STAmount').val(),
                        TransportCost: $('#TransportCost').val(),
                        Discount: $('#Discount').val(),
                        DiscountAmount: $('# DiscountAmount').val(),
                        NetTotal: $('#NetTotal').val(),
                        CashReceive: $('#CashReceive').val(),
                        DueAmount: $('#DueAmount').val(),
                        ChangeAmount: $('#ChangeAmount').val(),
                        SaleDetails: SaleDetails
                    }
                    $(this).val('Please wait...');
                    $('.btn_hide').attr('disabled', true);

                    $.ajax({
                        url: '/Sale/SaveSale',
                        type: "POST",
                        data: JSON.stringify(data),
                        dataType: "JSON",
                        contentType: "application/json",
                        success: function (d) {
                            if (d.success == true) {
                                alert(d.message);
                                SaleDetails = [];
                                location.href = "/Sale/SaleList";
                                $('.btn_hide').attr('disabled', false);
                            }
                            else {
                                alert(d.message);
                                SaleDetails = [];
                            }
                            $('#submit').val('Save');
                        },
                        error: function () {
                            alert('Error. Please try again.');
                            $('#submit').val('Save');
                        }
                    });
                }

            });
            ////////////////////////////////////////////////////////////////////////////////////////////////////////
            $('#SaveandPrint').click(function () {

                var isAllValid = true;
                if ($('#CustomerId').val().trim() == '') {
                    isAllValid = false;
                    $('.CustomerId.text-danger').show();
                }
                else {

                    $('.CustomerId.text-danger').hide();
                }
                if ($('#SaleDate').val().trim() > 0) {
                    isAllValid = false;
                    $('.SaleDate.text-danger').show();
                }
                else {

                    $('.SaleDate.text-danger').hide();
                }
                if (isAllValid) {

                    if ($('#swml250_quantity').val() != "") {
                       
                       
                            SaleDetails.push({
                                SaleDetailId: $('#swml250_SaleId').val().trim(),
                                ProductName: $('#swml250').val().trim(),
                                Quantity: parseInt($('#swml250_quantity').val().trim()),                               
                                QtyCase: $('#swml250_qty').val().trim(),
                                FacePrice: parseInt($('#swml250_unit').val().trim()),
                                TotalPrice: parseInt($('#swml250_Total_amount').val().trim())

                            });
                        
                    }

                    if ($('#sw5ml_quantity').val() != "") {
                        SaleDetails.push({
                            SaleDetailId: $('#sw5ml_SaleId').val().trim(),
                            ProductName: $('#sw5ml').val().trim(),
                            Quantity: parseInt($('#sw5ml_quantity').val().trim()),
                            QtyCase: $('#sw5ml_qty').val().trim(),
                            FacePrice: parseInt($('#sw5ml_unit').val().trim()),
                            TotalPrice: parseInt($('#sw5ml_Total_amount').val().trim())
                        });
                    }

                    if ($('#sw1l_quantity').val() != "") {
                        SaleDetails.push({
                            SaleDetailId: $('#sw1l_SaleId').val().trim(),
                            ProductName: $('#sw1l').val().trim(),
                            Quantity: parseInt($('#sw1l_quantity').val().trim()),
                            QtyCase: $('#sw1l_qty').val().trim(),
                            FacePrice: parseInt($('#sw1l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw1l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw15l_quantity').val() != "") {
                        SaleDetails.push({
                            SaleDetailId: $('#sw15l_SaleId').val().trim(),
                            ProductName: $('#sw15l').val().trim(),
                            Quantity: parseInt($('#sw15l_quantity').val().trim()),
                            QtyCase: $('#sw15l_qty').val().trim(),
                            FacePrice: parseInt($('#sw15l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw15l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw2l_quantity').val() != "") {
                        SaleDetails.push({
                            SaleDetailId: $('#sw2l_SaleId').val().trim(),
                            ProductName: $('#sw2l').val().trim(),
                            Quantity: parseInt($('#sw2l_quantity').val().trim()),
                            QtyCase: $('#sw2l_qty').val().trim(),
                            FacePrice: parseInt($('#sw2l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw2l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw5l_quantity').val() != "") {
                        SaleDetails.push({
                            SaleDetailId: $('#sw5l_SaleId').val().trim(),
                            ProductName: $('#sw5l').val().trim(),
                            Quantity: parseInt($('#sw5l_quantity').val().trim()),
                            QtyCase: $('#sw5l_qty').val().trim(),
                            FacePrice: parseInt($('#sw5l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw5l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw20l_quantity').val() != "") {
                        SaleDetails.push({
                            SaleDetailId: $('#sw20l_SaleId').val().trim(),
                            ProductName: $('#sw20l').val().trim(),
                            Quantity: parseInt($('#sw20l_quantity').val().trim()),
                            QtyCase: $('#sw20l_qty').val().trim(),
                            FacePrice: parseInt($('#sw20l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw20l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw20l4_quantity').val() != "") {
                        SaleDetails.push({
                            SaleDetailId: $('#Sw20l4SaleDetailId').val().trim(),
                            ProductName: $('#sw20l4').val().trim(),
                            Quantity: parseInt($('#sw20l4_quantity').val().trim()),
                            QtyCase: $('#sw20l4_qty').val().trim(),
                            FacePrice: parseInt($('#sw20l4_unit').val().trim()),
                            TotalPrice: parseInt($('#sw20l4_Total_amount').val().trim())
                        });
                    }
                     if ($('#others_quantity').val() != "") {
                        SaleDetails.push({
                            ProductName: $('#others').val().trim(),
                            Quantity: parseInt($('#others_quantity').val().trim()),
                            QtyCase: $('#others_qty').val().trim(),
                            FacePrice: parseInt($('#others_unit').val().trim()),
                            TotalPrice: parseInt($('#others_Total_amount').val().trim())
                        });
                    }
                   
                     var data = {                        
                        SaleId: $('#SaleId').val(),
                        CustomerId: $('#CustomerId').val(),
                        CustomerName: $('#CustomerId').val(),
                        AddressLine1: $('#AddressLine1').val(),
                        Phone: $('#Phone').val(),
                        SaleDate: $('#SaleDate').val(),
                        InvoiceId: $('#InvoiceId').val(),
                        TSSD: $('#TSSD').val(),
                        TSVat: $('#TSVat').val(),
                        STAmount: $('#STAmount').val(),
                        TransportCost: $('#TransportCost').val(),
                        Discount: $('#Discount').val(),
                        DiscountAmount: $('#DiscountAmount').val(),
                        NetTotal: $('#NetTotal').val(),
                        CashReceive: $('#CashReceive').val(),
                        DueAmount: $('#DueAmount').val(),
                        ChangeAmount: $('#ChangeAmount').val(),
                        SaleDetails: SaleDetails
                    }
                     $(this).val('Please wait...');
                     $('.btn_hide').attr('disabled', true);

                    $.ajax({
                        url: '/Sale/SaveAndPrintSale',
                        type: "POST",
                        data: JSON.stringify(data),
                        dataType: "JSON",
                        contentType: "application/json",
                        success: function (d) {
                            if (d.success == true) {
                                window.open(d.Invurl, "_blank");
                                window.open(d.Geturl, "_blank");
                                window.open(d.Chalanurl, "_blank");
                                location.href = "/Sale/SaleList";

                            }
                            else {
                                alert(d.message);
                                SaleDetails = [];
                            }
                            $('#SaveandPrint').val('Save And Print');
                        },
                        error: function () {
                            alert('Error. Please try again.');
                            $('#SaveandPrint').val('Save And Print');
                        }
                    });
                }

            });
            ///
            $("#swml250_quantity").on('change keyup', function () {

                var swml250_quantity = parseInt($(this).val());
                var swml250_unit = parseInt($("#swml250_unit").val());
                var swml250_stock = parseInt($("#swml250_stock").val());

                if (swml250_stock >= swml250_quantity) {
                    if (swml250_quantity != "") {
                        if (swml250_quantity >= "15") {
                            var modulsqty = swml250_quantity % 15;
                            var diviqty = swml250_quantity / 15;
                            var qty = Math.trunc(diviqty);
                            var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                        }
                        else {
                            var totalqty = 0 + "C" + " " + "&" + " " + swml250_quantity + "Pc"
                        }
                        if (swml250_unit == "6") {
                            tolalPrice = parseInt(swml250_quantity * swml250_unit);
                        }
                        else {
                            tolalPrice = parseInt(swml250_quantity * swml250_unit);
                        }

                        if (swml250_unit == 6) {
                            var vat = swml250_quantity * 1.59;
                        }
                        else {
                            var vat = swml250_quantity * 1.59;
                        }
                        if (swml250_unit == 6) {
                            var sd = swml250_quantity * .29;
                        }
                        else {
                            var sd = swml250_quantity * .29;
                        }



                        $("#swml250_Total_vat").val(parseFloat(vat).toFixed(2));
                        //ar totalsd = (allPrice / 100) * sdtpercent;
                        $("#swml250_Total_sd").val(parseFloat(sd).toFixed(2));
                        $("#swml250_qty").val(totalqty);
                        $("#swml250_Total_amount").val(tolalPrice);

                    }
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                    if (swml250_quantity == 0) {
                        $("#swml250_qty").val(0);
                        $("#swml250_Total_amount").val(0);
                        $("#swml250_Total_vat").val(0);
                        $("#swml250_Total_sd").val(0);
                        calculetteSummary();
                        calculetteSummaryVat();
                        calculetteSummarySD();
                    }
                }
                else {
                    alert("Stock is not avilable");
                    $("#swml250_quantity").val(0);
                    $("#swml250_qty").val(0);
                    $("#swml250_Total_amount").val(0);
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                }

            });
            $("#sw5ml_quantity").on('change keyup', function () {

                var sw5ml_quantity = parseInt($(this).val());
                var sw5ml_unit = parseInt($("#sw5ml_unit").val());
                var sw5ml_stock = parseInt($("#sw5ml_stock").val());
                if (sw5ml_stock >= sw5ml_quantity) {
                    if (sw5ml_quantity != "") {
                        if (sw5ml_quantity >= "12") {
                            var modulsqty = sw5ml_quantity % 12;
                            var diviqty = sw5ml_quantity / 12;
                            var qty = Math.trunc(diviqty);
                            var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                        }
                        else {
                            var totalqty = 0 + "C" + " " + "&" + " " + sw5ml_quantity + "Pc"
                        }
                        if (sw5ml_unit == "9") {
                            tolalPrice = parseInt(sw5ml_quantity * sw5ml_unit);
                        }
                        else {
                            tolalPrice = parseInt(sw5ml_quantity * sw5ml_unit);
                        }

                        if (sw5ml_unit == "9") {
                            vat = 1.17 * sw5ml_quantity;
                        }
                        else {
                            vat = 1.17 * sw5ml_quantity;
                        }
                        if (sw5ml_unit == "9") {
                            sd = sw5ml_quantity * .37;
                        }
                        else {
                            sd = sw5ml_quantity * .37;
                        }
                        $("#sw5ml_Total_vat").val(parseFloat(vat).toFixed(2));

                        $("#sw5ml_Total_sd").val(parseFloat(sd).toFixed(2));

                        $("#sw5ml_qty").val(totalqty);
                        $("#sw5ml_Total_amount").val(tolalPrice);

                    }
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                    if (sw5ml_quantity == 0) {
                        $("#sw5ml_qty").val(0);
                        $("#sw5ml_Total_amount").val(0);
                        $("#sw5ml_Total_vat").val(0);
                        $("#sw5ml_Total_sd").val(0);
                        calculetteSummary();
                        calculetteSummaryVat();
                        calculetteSummarySD();
                    }
                }
                else {
                    alert("Stock is not avilable");
                    $("#sw5ml_quantity").val(0);
                    $("#sw5ml_qty").val(0);
                    $("#sw5ml_Total_amount").val(0);
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                }

            });

            $("#sw1l_quantity").on('change keyup', function () {

                var sw1l_quantity = parseInt($(this).val());
                var sw1l_unit = parseInt($("#sw1l_unit").val());
                var sw1l_stock = parseInt($("#sw1l_stock").val());
                if (sw1l_stock >= sw1l_quantity) {
                    if (sw1l_quantity != "") {
                        if (sw1l_quantity >= "6") {
                            var modulsqty = sw1l_quantity % 6;
                            var diviqty = sw1l_quantity / 6;
                            var qty = Math.trunc(diviqty);
                            var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                        }
                        else {
                            var totalqty = 0 + "C" + " " + "&" + " " + sw1l_quantity + "Pc"
                        }
                        if (sw1l_unit == "13") {
                            tolalPrice = parseInt(sw1l_quantity * sw1l_unit);
                        }
                        else {
                            tolalPrice = parseInt(sw1l_quantity * sw1l_unit);
                        }



                        if (sw1l_unit == "13") {
                            vat = sw1l_quantity * 1.70;
                        }
                        else {
                            vat = sw1l_quantity * 1.70;
                        }
                        if (sw1l_unit == "13") {
                            sd = sw1l_quantity * 0.54;
                        }
                        else {
                            sd = sw1l_quantity * 0.54;
                        }
                        $("#sw1l_Total_vat").val(parseFloat(vat).toFixed(2));
                        //ar totalsd = (allPrice / 100) * sdtpercent;
                        $("#sw1l_Total_sd").val(parseFloat(sd).toFixed(2));
                        $("#sw1l_qty").val(totalqty);
                        $("#sw1l_Total_amount").val(tolalPrice);

                    }
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                    if (sw1l_quantity == 0) {
                        $("#sw1l_qty").val(0);
                        $("#sw1l_Total_amount").val(0);
                        $("#sw1l_Total_vat").val(0);
                        $("#sw1l_Total_sd").val(0);
                        calculetteSummary();
                        calculetteSummaryVat();
                        calculetteSummarySD();
                    }
                }
                else {
                    alert("Stock is not avilable");
                    $("#sw1l_quantity").val(0);
                    $("#sw1l_qty").val(0);
                    $("#sw1l_Total_amount").val(0);
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                }

            });
            $("#sw15l_quantity").on('change keyup', function () {

                var sw15l_quantity = parseInt($(this).val());
                var sw15l_unit = parseInt($("#sw15l_unit").val());
                var sw15l_stock = parseInt($("#sw15l_stock").val());
                if (sw15l_stock >= sw15l_quantity) {
                    if (sw15l_quantity != "") {
                        if (sw15l_quantity >= "6") {
                            var modulsqty = sw15l_quantity % 6;
                            var diviqty = sw15l_quantity / 6;
                            var qty = Math.trunc(diviqty);
                            var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                        }
                        else {
                            var totalqty = 0 + "C" + " " + "&" + " " + sw15l_quantity + "Pc"
                        }
                        if (sw15l_unit == "16") {
                            tolalPrice = parseInt(sw15l_quantity * sw15l_unit);
                        }
                        else {
                            tolalPrice = parseInt(sw15l_quantity * sw15l_unit);
                        }

                        if (sw15l_unit == "16") {
                            vat = sw15l_quantity * 2.09;
                        }
                        else {
                            vat = sw15l_quantity * 2.09;
                        }
                        if (sw15l_unit == "16") {
                            sd = sw15l_quantity * 0.66;
                        }
                        else {
                            sd = sw15l_quantity * 0.66;
                        }
                        $("#sw15l_Total_vat").val(parseFloat(vat).toFixed(2));
                        //ar totalsd = (allPrice / 100) * sdtpercent;
                        $("#sw15l_Total_sd").val(parseFloat(sd).toFixed(2));
                        $("#sw15l_qty").val(totalqty);
                        $("#sw15l_Total_amount").val(tolalPrice);

                    }
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                    if (sw15l_quantity == 0) {
                        $("#sw15l_qty").val(0);
                        $("#sw15l_Total_amount").val(0);
                        $("#sw15l_Total_vat").val(0);
                        $("#sw15l_Total_sd").val(0);
                        calculetteSummary();
                        calculetteSummaryVat();
                        calculetteSummarySD();
                    }
                }

                else {
                    alert("Stock is not avilable");
                    $("#sw15l_quantity").val(0);
                    $("#sw15l_qty").val(0);
                    $("#sw15l_Total_amount").val(0);
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                }

            });
            $("#sw2l_quantity").on('change keyup', function () {

                var sw2l_quantity = parseInt($(this).val());
                var sw2l_unit = parseInt($("#sw2l_unit").val());
                var sw2l_stock = parseInt($("#sw2l_stock").val());
                if (sw2l_stock >= sw2l_quantity) {
                    if (sw2l_quantity != "") {
                        if (sw2l_quantity >= "6") {
                            var modulsqty = sw2l_quantity % 6;
                            var diviqty = sw2l_quantity / 6;
                            var qty = Math.trunc(diviqty);
                            var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                        }
                        else {
                            var totalqty = 0 + "C" + " " + "&" + " " + sw2l_quantity + "Pc"
                        }
                        if (sw2l_unit == "20") {
                            tolalPrice = parseInt(sw2l_quantity * sw2l_unit);
                        }
                        else {
                            tolalPrice = parseInt(sw2l_quantity * sw2l_unit);
                        }



                        if (sw2l_unit == "20") {
                            vat = sw2l_quantity * 2.61;
                        }
                        else {
                            vat = sw2l_quantity * 2.61;
                        }
                        if (sw2l_unit == "20") {
                            sd = sw2l_quantity * 0.82;
                        }
                        else {
                            sd = sw2l_quantity * 0.82;
                        }
                        $("#sw2l_qty").val(totalqty);
                        $("#sw2l_Total_amount").val(tolalPrice);
                        $("#sw2l_Total_vat").val(parseFloat(vat).toFixed(2));
                        //ar totalsd = (allPrice / 100) * sdtpercent;
                        $("#sw2l_Total_sd").val(parseFloat(sd).toFixed(2));

                    }
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                    if (sw2l_quantity == 0) {
                        $("#sw2l_qty").val(0);
                        $("#sw2l_Total_amount").val(0);
                        $("#sw2l_Total_vat").val(0);
                        $("#sw2l_Total_sd").val(0);
                        calculetteSummary();
                        calculetteSummaryVat();
                        calculetteSummarySD();
                    }
                }
                else {
                    alert("Stock is not avilable");
                    $("#sw2l_quantity").val(0);
                    $("#sw2l_qty").val(0);
                    $("#sw2l_Total_amount").val(0);
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                }

            });
            $("#sw5l_quantity").on('change keyup', function () {

                var sw5l_quantity = parseInt($(this).val());
                var sw5l_unit = parseInt($("#sw5l_unit").val());
                var sw5l_stock = parseInt($("#sw5l_stock").val());
                if (sw5l_stock >= sw5l_quantity) {
                    if (sw5l_quantity != "") {

                        var totalqty = 0 + "C" + " " + "&" + " " + sw5l_quantity + "Pc"

                        if (sw5l_unit == "40") {
                            tolalPrice = parseInt(sw5l_quantity * sw5l_unit);
                        }
                        else {
                            tolalPrice = parseInt(sw5l_quantity * sw5l_unit);
                        }


                        if (sw5l_unit == "40") {
                            vat = sw5l_quantity * 5.00;
                        }
                        else {
                            vat = sw5l_quantity * 5.00;
                        }

                        $("#sw5l_qty").val(totalqty);
                        $("#sw5l_Total_amount").val(tolalPrice);
                        $("#sw5l_Total_vat").val(parseFloat(vat).toFixed(2));

                    }
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                    if (sw5l_quantity == 0) {
                        $("#sw5l_qty").val(0);
                        $("#sw5l_Total_amount").val(0);
                        $("#sw5l_Total_vat").val(0);

                        calculetteSummary();
                        calculetteSummaryVat();
                        calculetteSummarySD();
                    }

                }
                else {
                    alert("Stock is not avilable");
                    $("#sw5l_quantity").val(0);
                    $("#sw5l_qty").val(0);
                    $("#sw5l_Total_amount").val(0);
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();

                }

            });
            $("#sw20l_quantity").on('change keyup', function () {

                var sw20l_quantity = parseInt($(this).val());
                var sw20l_unit = parseInt($("#sw20l_unit").val());
                var sw20l_stock = parseInt($("#sw20l_stock").val());
                if (sw20l_stock >= sw20l_quantity) {
                    if (sw20l_unit == "40") {
                        tolalPrice = parseInt(sw20l_quantity * sw20l_unit);
                    }
                    else {
                        tolalPrice = parseInt(sw20l_quantity * sw20l_unit);
                    }
                    var totalqty = 0 + "C" + " " + "&" + " " + sw20l_quantity + "Pc"

                    if (sw20l_unit == "40") {
                        vat = sw20l_quantity * 3.9;
                    }
                    else {
                        vat = sw20l_quantity * 3.9;
                    }
                    $("#sw20l_qty").val(totalqty);
                    $("#sw20l_Total_amount").val(tolalPrice);
                    $("#sw20l_Total_vat").val(parseFloat(vat).toFixed(2));
                    //ar totalsd = (allPrice / 100) * sdtpercent;

                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                    if (sw20l_quantity == 0) {
                        $("#sw20l_qty").val(0);
                        $("#sw20l_Total_amount").val(0);
                        $("#sw20l_Total_vat").val(0);

                        calculetteSummary();
                        calculetteSummaryVat();
                        calculetteSummarySD();
                    }
                }

                else {
                    alert("Stock is not avilable");
                    $("#sw20l_quantity").val(0);

                    $("#sw20l_Total_amount").val(0);
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();

                }

            });
            $("#sw20l4_quantity").on('keyup', function () {

                var sw20l4_quantity = parseInt($(this).val());
                var sw20l4_unit = parseInt($("#sw20l4_unit").val());
                var sw20l4_stock = parseInt($("#sw20l4_stock").val());
                if (sw20l4_stock >= sw20l4_quantity) {
                    if (sw20l4_unit == "30") {
                        tolalPrice = parseInt(sw20l4_quantity * sw20l4_unit);
                    }
                    else {
                        tolalPrice = parseInt(sw20l4_quantity * sw20l4_unit);
                    }
                    var totalqty = 0 + "C" + " " + "&" + " " + sw20l4_quantity + "Pc"

                    if (sw20l4_unit == "30") {
                        vat = sw20l4_quantity * 3.9;
                    }
                    else {
                        vat = sw20l4_quantity * 3.9;
                    }
                    $("#sw20l4_qty").val(totalqty);
                    $("#sw20l4_Total_amount").val(tolalPrice);
                    $("#sw20l4_Total_vat").val(parseFloat(vat).toFixed(2));
                    //ar totalsd = (allPrice / 100) * sdtpercent;

                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();
                    if (sw20l4_quantity == 0) {
                        $("#sw20l4_qty").val(0);
                        $("#sw20l4_Total_amount").val(0);
                        $("#sw20l4_Total_vat").val(0);

                        calculetteSummary();
                        calculetteSummaryVat();
                        calculetteSummarySD();
                    }

                }

                else {
                    alert("Stock is not avilable");
                    $("#sw20l4_quantity").val(0);

                    $("#sw20l4_Total_amount").val(0);
                    calculetteSummary();
                    calculetteSummaryVat();
                    calculetteSummarySD();

                }

            });
            $("#others_quantity").on('keyup', function () {

                var others_quantity = parseInt($(this).val());
                var others_unit = parseInt($("#others_unit").val());
                tolalPrice = parseInt(others_quantity * others_unit);
                $("#others_Total_amount").val(tolalPrice);

                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();

            });
            $("#others_unit").on('keyup', function () {

                var others_quantity = parseInt($("#others_quantity").val());
                var others_unit = parseInt($("#others_unit").val());
                tolalPrice = parseInt(others_quantity * others_unit);
                $("#others_Total_amount").val(tolalPrice);

                calculetteSummary();
                calculetteSummaryVat();
                calculetteSummarySD();

            });

        });

        function calculetteSummary() {
            var swml250_Total_amount = $("#swml250_Total_amount").val();
            var sw5ml_Total_amount = $("#sw5ml_Total_amount").val();
            var sw1l_Total_amount = $("#sw1l_Total_amount").val();
            var sw15l_Total_amount = $("#sw15l_Total_amount").val();
            var sw2l_Total_amount = $("#sw2l_Total_amount").val();
            var sw5l_Total_amount = $("#sw5l_Total_amount").val();
            var sw20l_Total_amount = $("#sw20l_Total_amount").val();
            var sw20l4_Total_amount = $("#sw20l4_Total_amount").val();

            var others_Total_amount = $("#others_Total_amount").val();

            var NetTotal = $("#NetTotal").val();

            if (swml250_Total_amount == '' || swml250_Total_amount == 0) {
                swml250_Total_amount = 0;
            }
            if (sw5ml_Total_amount == '' || sw5ml_Total_amount == 0) {
                sw5ml_Total_amount = 0;
            }
            if (sw1l_Total_amount == '' || sw1l_Total_amount == 0) {
                sw1l_Total_amount = 0;
            }
            if (sw15l_Total_amount == '' || sw15l_Total_amount == 0) {
                sw15l_Total_amount = 0;
            }
            if (sw2l_Total_amount == '' || sw2l_Total_amount == 0) {
                sw2l_Total_amount = 0;
            }
            if (sw5l_Total_amount == '' || sw5l_Total_amount == 0) {
                sw5l_Total_amount = 0;
            }

            if (sw20l4_Total_amount == '' || sw20l4_Total_amount == 0) {
                sw20l4_Total_amount = 0;
            }
            if (sw20l_Total_amount == '' || sw20l_Total_amount == 0) {
                sw20l_Total_amount = 0;
            }
            if (others_Total_amount == '' || others_Total_amount == 0) {
                others_Total_amount = 0;
            }
            var allPrice = parseFloat(swml250_Total_amount) + parseFloat(sw5ml_Total_amount) + parseFloat(sw1l_Total_amount) + parseFloat(sw15l_Total_amount) + parseFloat(sw2l_Total_amount) + parseFloat(sw5l_Total_amount) + parseFloat(sw20l_Total_amount) + parseFloat(sw20l4_Total_amount) + parseFloat(others_Total_amount);


            $("#STAmount").val(allPrice);

        }
        function calculetteSummaryVat() {
            var swml250_Total_vat = $("#swml250_Total_vat").val();
            var sw5ml_Total_vat = $("#sw5ml_Total_vat").val();
            var sw1l_Total_vat = $("#sw1l_Total_vat").val();
            var sw15l_Total_vat = $("#sw15l_Total_vat").val();
            var sw2l_Total_vat = $("#sw2l_Total_vat").val();
            var sw5l_Total_vat = $("#sw5l_Total_vat").val();
            var sw20l_Total_vat = $("#sw20l_Total_vat").val();

            var sw20l4_Total_vat = $("#sw20l4_Total_vat").val();
            var NetTotal = $("#NetTotal").val();

            if (swml250_Total_vat == '' || swml250_Total_vat == 0) {
                swml250_Total_vat = 0;
            }
            if (sw5ml_Total_vat == '' || sw5ml_Total_vat == 0) {
                sw5ml_Total_vat = 0;
            }
            if (sw1l_Total_vat == '' || sw1l_Total_vat == 0) {
                sw1l_Total_vat = 0;
            }
            if (sw15l_Total_vat == '' || sw15l_Total_vat == 0) {
                sw15l_Total_vat = 0;
            }
            if (sw2l_Total_vat == '' || sw2l_Total_vat == 0) {
                sw2l_Total_vat = 0;
            }
            if (sw5l_Total_vat == '' || sw5l_Total_vat == 0) {
                sw5l_Total_vat = 0;
            }
            if (sw20l_Total_vat == '' || sw20l_Total_vat == 0) {
                sw20l_Total_vat = 0;
            }
            if (sw20l4_Total_vat == '' || sw20l4_Total_vat == 0) {
                sw20l4_Total_vat = 0;
            }

            var allVat = parseFloat(swml250_Total_vat) + parseFloat(sw5ml_Total_vat) + parseFloat(sw1l_Total_vat) + parseFloat(sw15l_Total_vat) + parseFloat(sw2l_Total_vat) + parseFloat(sw5l_Total_vat) + parseFloat(sw20l_Total_vat) + parseFloat(sw20l4_Total_vat);


            $("#TSVat").val(parseFloat(allVat).toFixed(2));


            CalculateSummaryAmount();

        }
        function calculetteSummarySD() {
            var swml250_Total_sd = $("#swml250_Total_sd").val();
            var sw5ml_Total_sd = $("#sw5ml_Total_sd").val();
            var sw1l_Total_sd = $("#sw1l_Total_sd").val();
            var sw15l_Total_sd = $("#sw15l_Total_sd").val();
            var sw2l_Total_sd = $("#sw2l_Total_sd").val();
            var sw5l_Total_sd = $("#sw5l_Total_sd").val();
            var sw20l_Total_sd = $("#sw20l_Total_sd").val();
            var sw20l4_Total_sd = $("#sw20l4_Total_sd").val();


            if (swml250_Total_sd == '' || swml250_Total_sd == 0) {
                swml250_Total_sd = 0;
            }
            if (sw5ml_Total_sd == '' || sw5ml_Total_sd == 0) {
                sw5ml_Total_sd = 0;
            }
            if (sw1l_Total_sd == '' || sw1l_Total_sd == 0) {
                sw1l_Total_sd = 0;
            }
            if (sw15l_Total_sd == '' || sw15l_Total_sd == 0) {
                sw15l_Total_sd = 0;
            }
            if (sw2l_Total_sd == '' || sw2l_Total_sd == 0) {
                sw2l_Total_sd = 0;
            }
            if (sw5l_Total_sd == '' || sw5l_Total_sd == 0) {
                sw5l_Total_sd = 0;
            }
            if (sw20l_Total_sd == '' || sw20l_Total_sd == 0) {
                sw20l_Total_sd = 0;
            }
            if (sw20l4_Total_sd == '' || sw20l4_Total_sd == 0) {
                sw20l4_Total_sd = 0;
            }
            var allSD = parseFloat(swml250_Total_sd) + parseFloat(sw5ml_Total_sd) + parseFloat(sw1l_Total_sd) + parseFloat(sw15l_Total_sd) + parseFloat(sw2l_Total_sd) + parseFloat(sw5l_Total_sd) + parseFloat(sw20l_Total_sd) + parseFloat(sw20l4_Total_sd);


            $("#TSSD").val(parseFloat(allSD).toFixed(2));


            CalculateSummaryAmount();

        }
        function CalculateSummaryAmount() {

            var STAmount = $("#STAmount").val();

            var TransportCost = $("#TransportCost").val();
            var discount = $("#Discount").val();
            var DiscountAmount = $("#DiscountAmount").val();

            var cashReceive = $("#CashReceive").val();
            var dueAmount = $("#DueAmount").val();

            if (STAmount == '' || STAmount == 0) {
                STAmount = 0;

            }

            if (TransportCost == ''  || TransportCost == 0) {
                TransportCost = 0;

            }
            if (discount == '' || discount == 0) {
                discount = 0;
            }
            else
            {
                $("#Discount").val($("#Discount").val());
            }
            if (DiscountAmount == '' || DiscountAmount == 0) {
                DiscountAmount = 0;

            }
            else {
                $("#DiscountAmount").val($("#DiscountAmount").val());


            }
            if (cashReceive == '' ||cashReceive == 0) {
                cashReceive = 0;

            }
            if (dueAmount == '' || dueAmount == 0) {
                dueAmount = 0;

            }


            var netPrice = parseFloat(STAmount) + parseFloat(TransportCost);


            var totaldiscount = (netPrice / 100) * discount;
            $("#DiscountAmount").val(parseFloat(totaldiscount).toFixed(2));

            $("#NetTotal").val(parseFloat(netPrice - totaldiscount).toFixed(2));
            $("#CashReceive").val(parseFloat(netPrice - totaldiscount).toFixed(2));

            $("#DueAmount").val((parseFloat($("#CashReceive").val()) - parseFloat($("#NetTotal").val())).toFixed(2));

        }
        function CalculateSummaryAmountbytk() {
            var STAmount = $("#STAmount").val();

            var TransportCost = $("#TransportCost").val();
            var discount = $("#Discount").val();
            var DiscountAmount = $("#DiscountAmount").val();

            var cashReceive = $("#CashReceive").val();
            var dueAmount = $("#DueAmount").val();

            if (STAmount == '' || STAmount == 0) {
                STAmount = 0;

            }

            if (TransportCost == '' || TransportCost == 0) {
                TransportCost = 0;

            }
            if (discount == '' || discount == 0) {
                discount = 0;
            }
            else {
                $("#Discount").val($("#Discount").val());

                //alert(discount);
            }
            if (DiscountAmount == '' || DiscountAmount == 0) {
                DiscountAmount = 0;

            }
            else {
                $("#DiscountAmount").val($("#DiscountAmount").val());


            }
            if (cashReceive == '' || cashReceive == 0) {
                cashReceive = 0;

            }
            if (dueAmount == '' || dueAmount == 0) {
                dueAmount = 0;

            }


            var netPrice = parseFloat(STAmount) + parseFloat(TransportCost);
            var totaldiscount = (DiscountAmount / netPrice) * 100 ;
            $("#Discount").val(parseFloat(totaldiscount).toFixed(2));

            $("#NetTotal").val(parseFloat(netPrice - DiscountAmount).toFixed(2));
            $("#CashReceive").val(parseFloat(netPrice - DiscountAmount).toFixed(2));

            $("#DueAmount").val((parseFloat($("#CashReceive").val()) - parseFloat($("#NetTotal").val())).toFixed(2));

        }
        $("#CashReceive").on('keyup', function () {

            var cashReceive = $("#CashReceive").val();
            var NetTotal = $("#NetTotal").val();
            var duetotal = parseFloat(NetTotal - cashReceive).toFixed(2);

            if (cashReceive > NetTotal) {
                $("#DueAmount").val(0);
                $("#ChangeAmount").val(duetotal);
            }
            else {
                $("#DueAmount").val(duetotal);
                $("#ChangeAmount").val(0);
            }

        });

</script>

