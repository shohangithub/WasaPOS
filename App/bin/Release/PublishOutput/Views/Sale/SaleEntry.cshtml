@model Model.ViewModels.SaleViewModels

@{
    ViewBag.Title = "SaleEntry";
    string currentDate = DateTime.Now.ToString("yyyy-MM-dd");
}
<form class="form-horizontal" role="form">
    <div class="col-xs-9 ">
        <div class="widget-box">
            <div class="widget-body">
                <div class="widget-main">

                    <input type="hidden" id="hidden_area" />
                    <div class="row">
                        <div class="col-xs-12 ">
                            <div class="widget-box ">

                                <div class="widget-header">
                                    <h4 class="widget-title">Sales Entry</h4>
                                </div>
                                <div class="widget-body">
                                    <div class="widget-main">
                                        <div class="row">
                                            <div class="col-sm-6">

                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label no-padding-right" for="contact_persion">Customer Name</label>
                                                    <div class="col-sm-8">
                                                        @Html.DropDownList("CustomerId", (SelectList)ViewData["Customer"], "Select", new { @class = "form-control", id = "CustomerId" })
                                                        <span class="CustomerId text-danger">Customer Name no required</span>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label no-padding-right" for="AddressLine1"> Address</label>

                                                    <div class="col-sm-8">
                                                        <input type="text" id="AddressLine1" name="AddressLine1" class="form-control" readonly />

                                                    </div>
                                                </div>

                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label no-padding-right" for="Phone"> Phone</label>

                                                    <div class="col-sm-8">
                                                        <input type="text" id="Phone" name="Phone" class="form-control" readonly />

                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label no-padding-right" for="SaleDate">Sale Date</label>
                                                    <div class="col-sm-8">
                                                        <div class='input-group date' id='datetimepicker'>
                                                            <input type="text" class="form-control" id="SaleDate" value="@currentDate" name="SaleDate" tabindex="2" />
                                                            <span class="input-group-addon">
                                                                <span class="glyphicon glyphicon-calendar"></span>
                                                            </span>
                                                        </div>
                                                        <span class="SaleDate text-danger">Sales Date no required</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <h4 style=" text-align:center;color:red">Last Production Entry Date:</h4>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 ">
                            <table id="dynamic-table" class="table table-responsive">
                                <thead>
                                    <tr style="background-color:#0094ff; margin-top:20px; color:#fff; text-align:center;">
                                        <th style="width:280px;">Product Name</th>
                                        <th>In Stock </th>
                                        <th>Quantity</th>
                                        <th>Qty Case </th>
                                        <th style="width:100px;">Unit Price</th>
                                        <th>Total Price </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>

                                        <td>
                                            <input type="text" id="swml250" class="form-control" value="Shanti Water 250 ML" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="swml250_stock" class="form-control" value="@Model.Swml250CurrentStock" readonly />
                                        </td>

                                        <td>
                                            <input type="text" id="swml250_quantity" placeholder="Quantity" class="form-control" value="" />
                                        </td>
                                        <td>
                                            <input type="text" id="swml250_qty" class="form-control" value="" readonly />
                                        </td>
                                        <td>
                                            <select class="form-control" id="swml250_unit">
                                                <option value="6">6</option>
                                                <option value="7">7</option>
                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="swml250_Total_amount" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="sw5ml" class="form-control" value="Shanti Water 0.5 L" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw5ml_stock" class="form-control" value="@Model.Sw5mlCurrentStock" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw5ml_quantity" placeholder="Quantity" class="form-control" value="" tabindex="4" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw5ml_qty" class="form-control" value="" readonly />
                                        </td>
                                        <td>
                                            <select class="form-control" id="sw5ml_unit">
                                                <option value="9">9</option>
                                                <option value="10">10</option>
                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw5ml_Total_amount" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="sw1l" class="form-control" value="Shanti Water 1.0 L" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw1l_stock" class="form-control" value="@Model.Sw1lCurrentStock" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw1l_quantity" placeholder="Quantity" class="form-control" value="" tabindex="5" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw1l_qty" class="form-control" value="" readonly />
                                        </td>
                                        <td>
                                            <select class="form-control" id="sw1l_unit">
                                                <option value="13">13</option>
                                                <option value="15">15</option>
                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw1l_Total_amount" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="sw15l" class="form-control" value="Shanti Water 1.5 L" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw15l_stock" class="form-control" value="@Model.Sw15lCurrentStock" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw15l_quantity" placeholder="Quantity" class="form-control" value="" tabindex="6" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw15l_qty" class="form-control" value="" readonly />
                                        </td>
                                        <td>
                                            <select class="form-control" id="sw15l_unit">
                                                <option value="16">16</option>
                                                <option value="15">18</option>
                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw15l_Total_amount" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="sw2l" class="form-control" value="Shanti Water 2.0 L" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw2l_stock" class="form-control" value="@Model.Sw2lCurrentStock" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw2l_quantity" placeholder="Quantity" class="form-control" value="" tabindex="7" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw2l_qty" class="form-control" value="" readonly />
                                        </td>
                                        <td>
                                            <select class="form-control" id="sw2l_unit">
                                                <option value="20">20</option>
                                                <option value="22">22</option>
                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw2l_Total_amount" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="sw5l" class="form-control" value="Shanti Water 5.0 L" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw5l_stock" class="form-control" value="@Model.Sw5lCurrentStock" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw5l_quantity" placeholder="Quantity" class="form-control" value="" tabindex="8" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw5l_qty" class="form-control" value="" readonly />
                                        </td>
                                        <td>
                                            <select class="form-control" id="sw5l_unit">
                                                <option value="40">40</option>
                                                <option value="45">45</option>
                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw5l_Total_amount" class="form-control" value="" readonly />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" id="sw20l" class="form-control" value="Shanti Water 20.0 L" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw20l_stock" class="form-control" value="@Model.Sw20lCurrentStock" readonly />
                                        </td>
                                        <td>
                                            <input type="text" id="sw20l_quantity" placeholder="Quantity" class="form-control" value="" tabindex="9" />
                                        </td>
                                        <td>
                                            <input type="text" id="sw20l_qty" class="form-control" value="" readonly />

                                        </td>
                                        <td>
                                            <select class="form-control" id="sw20l_unit">
                                                <option value="40">40</option>
                                                <option value="45">45</option>
                                            </select>

                                        </td>
                                        <td>
                                            <input type="text" id="sw20l_Total_amount" class="form-control" value="" readonly />
                                        </td>
                                    </tr>

                                </tbody>
                            </table>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-3">
        <div class="widget-box ">
            <div class="widget-header">
                <h4 class="widget-title">Summary</h4>


            </div>

            <div class="widget-body">
                <div class="widget-main">

                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="STAmount"> Total(Tk)</label>

                        <div class="col-sm-6">
                            <input type="text" id="STAmount" name="STAmount" class="form-control" value="0"  readonly />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="TSSD"> Where SD</label>

                        <div class="col-sm-6">
                            <input type="text" id="TSSD" class="form-control" value="0"  readonly />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="TSVat"> & VAT</label>

                        <div class="col-sm-6">
                            <input type="text" id="TSVat" class="form-control" value="0" readonly />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="TransportCost">(+)Transport/Labour</label>

                        <div class="col-sm-6">
                            <input type="text" id="TransportCost" onkeyup="CalculateSummaryAmount()" value="0"  class ="form-control" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="Discount">(-)Discount (%)</label>

                        <div class="col-sm-6">
                            <input type="text" id="Discount" onkeyup="CalculateSummaryAmount()" value="0" class="form-control" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="NetTotal">Net Total(Tk)</label>

                        <div class="col-sm-6">
                            <input type="text" id="NetTotal" class="form-control" value="0"  readonly />
                            <span class="NetTotal text-danger">Customer Name no required</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="CashReceive">Given(Tk)</label>

                        <div class="col-sm-6">
                            <input type="text" id="CashReceive" class="form-control" value="0"  onkeyup="CalculateSummaryAmount()" />
                            <span class="CashReceive text-danger">Customer Name no required</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-6 control-label no-padding-right" for="DueAmount">Due/Change(Tk)</label>

                        <div class="col-sm-6">
                            <input type="text" id="DueAmount" class="form-control" readonly value="0"  />
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-xs-6 ">

                            <input id="submit" type="button" value="Save" class="btn-save" />
                        </div>
                        <div class="col-xs-6">
                            <input id="submit" type="button" style="padding-top:2px;padding:6px 11px; " value="Save &amp; Print" class="btn-save" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<script type="text/javascript">


        $(document).ready(function () {


            $('#datetimepicker').datetimepicker({
                format: 'YYYY-MM-DD'
            });
            ////////////////////////////////////////////////////////
            var SaleDetails = [];
            $('.text-danger').hide();
            $('#submit').click(function () {
                var isAllValid = true;
                if ($('#CustomerId').val().trim() == '') {
                    isAllValid = false;
                    $('.CustomerId.text-danger').show();
                }
                else {

                    $('.CustomerId.text-danger').hide();
                }
                if ($('#NetTotal').val().trim() > 0) {
                    isAllValid = false;
                    $('.NetTotal.text-danger').show();
                }
                else {

                    $('.NetTotal.text-danger').hide();
                }
                if ($('#CashReceive').val().trim() > 0) {
                    isAllValid = false;
                    $('.CashReceive.text-danger').show();
                }
                else {

                    $('.CashReceive.text-danger').hide();
                }
               
                if (isAllValid) {

                    if ($('#swml250_unit').val() != "" || ('#swml250_unit').val() != 0) {
                        SaleDetails.push({
                            ProductName: $('#swml250').val().trim(),
                            Quantity: parseInt($('#swml250_quantity').val().trim()),
                            QtyCase: $('#swml250_qty').val().trim(),
                            FacePrice: parseInt($('#swml250_unit').val().trim()), 
                            TotalPrice: parseInt($('#swml250_Total_amount').val().trim())

                        });
                    }

                    if ($('#sw5ml_quantity').val() != "" || ('#sw5ml_quantity').val() != 0) {
                        SaleDetails.push({
                            ProductName: $('#sw5ml').val().trim(),
                            Quantity: parseInt($('#sw5ml_quantity').val().trim()),
                            QtyCase: $('#sw5ml_qty').val().trim(),
                            FacePrice: parseInt($('#sw5ml_unit').val().trim()),
                            TotalPrice: parseInt($('#sw5ml_Total_amount').val().trim())
                        });
                    }

                    if ($('#sw1l_quantity').val() != "" || ('#sw1l_quantity').val() != 0) {
                        SaleDetails.push({
                            ProductName: $('#sw1l').val().trim(),
                            Quantity: parseInt($('#sw1l_quantity').val().trim()),
                            QtyCase: $('#sw1l_qty').val().trim(),
                            FacePrice: parseInt($('#sw1l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw1l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw15l_quantity').val() != "" || ('#sw15l_quantity').val() != 0) {
                        SaleDetails.push({
                            ProductName: $('#sw15l').val().trim(),
                            Quantity: parseInt($('#sw15l_quantity').val().trim()),
                            QtyCase: $('#sw15l_qty').val().trim(),
                            FacePrice: parseInt($('#sw15l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw15l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw2l_quantity').val() != "" || ('#sw2l_quantity').val() != 0) {
                        SaleDetails.push({
                            ProductName: $('#sw2l').val().trim(),
                            Quantity: parseInt($('#sw2l_quantity').val().trim()),
                            QtyCase: $('#sw2l_qty').val().trim(),
                            FacePrice: parseInt($('#sw2l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw2l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw5l_quantity').val() != "" || ('#sw5l_quantity').val() != 0) {
                        SaleDetails.push({
                            ProductName: $('#sw5l').val().trim(),
                            Quantity: parseInt($('#sw5l_quantity').val().trim()),
                            QtyCase: $('#sw5l_qty').val().trim(),
                            FacePrice: parseInt($('#sw5l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw5l_Total_amount').val().trim())
                        });
                    }
                    if ($('#sw20l_quantity').val() != "") {
                        SaleDetails.push({
                            ProductName: $('#sw20l').val().trim(),
                            Quantity: parseInt($('#sw20l_quantity').val().trim()),
                            QtyCase: $('#sw20l_qty').val().trim(),
                            FacePrice: parseInt($('#sw20l_unit').val().trim()),
                            TotalPrice: parseInt($('#sw20l_Total_amount').val().trim())
                        });
                    }

                    var data = {
                        CustomerId: $('#CustomerId').val(),
                        SaleDate: $('#SaleDate').val(),
                        TSSD: $('#TSSD').val(),
                        TSVat: $('#TSVat').val(),
                        STAmount: $('#STAmount').val(),
                        TransportCost: $('#TransportCost').val(),
                        Discount: $('#Discount').val(),
                        NetTotal: $('#NetTotal').val(),
                        CashReceive: $('#CashReceive').val(),
                        DueAmount: $('#DueAmount').val(),
                        SaleDetails: SaleDetails
                    }
                    $(this).val('Please wait...');

                    $.ajax({
                        url: '/Sale/AddSale',
                        type: "POST",
                        data: JSON.stringify(data),
                        dataType: "JSON",
                        contentType: "application/json",
                        success: function (d) {
                            if (d.success == true) {
                                alert(d.message);
                                SaleDetails = [];
                            }
                            else {
                                alert(d.message);
                                SaleDetails = [];
                            }
                            $('#submit').val('Save');
                        },
                        error: function () {
                            alert('Error. Please try again.');
                            $('#submit').val('Save');
                        }
                    });
                }

            });
            ////////////////////////////////////////////////////////////////////////////////////////////////////////

            $("#swml250_quantity").on('keyup', function () {

                var swml250_quantity = parseInt($(this).val());
                var swml250_unit = parseInt($("#swml250_unit").val());
                var swml250_stock = parseInt($("#swml250_stock").val());
                
                if (swml250_stock >= swml250_quantity){
                    if (swml250_quantity != "") {
                        if (swml250_quantity >= "15") {
                            var modulsqty = swml250_quantity % 15;
                            var diviqty = swml250_quantity / 15;
                            var qty = Math.trunc(diviqty);
                            var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                        }
                        else {
                            var totalqty = 0 + "C" + " " + "&" + " " + swml250_quantity + "Pc"
                        }
                        if (swml250_unit == "7") {
                            tolalPrice = parseInt(swml250_quantity * swml250_unit);
                        }
                        else {
                            tolalPrice = parseInt(swml250_quantity * swml250_unit);
                        }
                        $("#swml250_qty").val(totalqty);
                        $("#swml250_Total_amount").val(tolalPrice);

                    }
                   
                }
                else {
                    alert("Stock is not avilable");
                    $("#swml250_quantity").val(0);
                    $("#swml250_qty").val(0);
                    $("#swml250_Total_amount").val(0);
                }
                calculetteSummary(); 
            });
            $("#sw5ml_quantity").on('keyup', function () {

                var sw5ml_quantity = parseInt($(this).val());
                var sw5ml_unit = parseInt($("#sw5ml_unit").val());
                var sw5ml_stock = parseInt($("#sw5ml_stock").val());
                if (sw5ml_stock >= sw5ml_quantity){
                    if (sw5ml_quantity != "") {
                        if (sw5ml_quantity >= "12") {
                            var modulsqty = sw5ml_quantity % 12;
                            var diviqty = sw5ml_quantity / 12;
                            var qty = Math.trunc(diviqty);
                            var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                        }
                        else {
                            var totalqty = 0 + "C" + " " + "&" + " " + sw5ml_quantity + "Pc"
                        }
                        if (sw5ml_unit == "10") {
                            tolalPrice = parseInt(sw5ml_quantity * sw5ml_unit);
                        }
                        else {
                            tolalPrice = parseInt(sw5ml_quantity * sw5ml_unit);
                        }
                        $("#sw5ml_qty").val(totalqty);
                        $("#sw5ml_Total_amount").val(tolalPrice);

                    }
                   
                }
                else {
                    alert("Stock is not avilable");
                    $("#sw5ml_quantity").val(0);
                    $("#sw5ml_qty").val(0);
                    $("#sw5ml_Total_amount").val(0);
                }
                calculetteSummary();
            });

            $("#sw1l_quantity").on('keyup', function () {

                var sw1l_quantity = parseInt($(this).val());
                var sw1l_unit = parseInt($("#sw1l_unit").val());
                var sw1l_stock = parseInt($("#sw1l_stock").val());
                if (sw1l_stock >= sw1l_quantity){
                    if (sw1l_quantity != "") {
                        if (sw1l_quantity >= "6") {
                            var modulsqty = sw1l_quantity % 6;
                            var diviqty = sw1l_quantity / 6;
                            var qty = Math.trunc(diviqty);
                            var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                        }
                        else {
                            var totalqty = 0 + "C" + " " + "&" + " " + sw1l_quantity + "Pc"
                        }
                        if (sw1l_unit == "15") {
                            tolalPrice = parseInt(sw1l_quantity * sw1l_unit);
                        }
                        else {
                            tolalPrice = parseInt(sw1l_quantity * sw1l_unit);
                        }
                        $("#sw1l_qty").val(totalqty);
                        $("#sw1l_Total_amount").val(tolalPrice);

                    }
                    
                }
                 else {
                    alert("Stock is not avilable");
                    $("#sw1l_quantity").val(0);
                    $("#sw1l_qty").val(0);
                    $("#sw1l_Total_amount").val(0);
                }
                calculetteSummary();
            });
            $("#sw15l_quantity").on('keyup', function () {

                var sw15l_quantity = parseInt($(this).val());
                var sw15l_unit = parseInt($("#sw15l_unit").val());
                var sw15l_stock = parseInt($("#sw15l_stock").val());
                if (sw15l_stock >= sw15l_quantity){
                    if (sw15l_quantity != "") {
                        if (sw15l_quantity >= "6") {
                            var modulsqty = sw15l_quantity % 6;
                            var diviqty = sw15l_quantity / 6;
                            var qty = Math.trunc(diviqty);
                            var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                        }
                        else {
                            var totalqty = 0 + "C" + " " + "&" + " " + sw15l_quantity + "Pc"
                        }
                        if (sw15l_unit == "18") {
                            tolalPrice = parseInt(sw15l_quantity * sw15l_unit);
                        }
                        else {
                            tolalPrice = parseInt(sw15l_quantity * sw15l_unit);
                        }
                        $("#sw15l_qty").val(totalqty);
                        $("#sw15l_Total_amount").val(tolalPrice);

                    }
                    
                }
                
                 else {
                    alert("Stock is not avilable");
                    $("#sw15l_quantity").val(0);
                    $("#sw15l_qty").val(0);
                    $("#sw15l_Total_amount").val(0);
                }
                calculetteSummary();
            });
            $("#sw2l_quantity").on('keyup', function () {

                var sw2l_quantity = parseInt($(this).val());
                var sw2l_unit = parseInt($("#sw2l_unit").val());
                var sw2l_stock = parseInt($("#sw2l_stock").val());
                if (sw2l_stock >= sw2l_quantity){
                    if (sw2l_quantity != "") {
                        if (sw2l_quantity >= "6") {
                            var modulsqty = sw2l_quantity % 6;
                            var diviqty = sw2l_quantity / 6;
                            var qty = Math.trunc(diviqty);
                            var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                        }
                        else {
                            var totalqty = 0 + "C" + " " + "&" + " " + sw2l_quantity + "Pc"
                        }
                        if (sw2l_unit == "22") {
                            tolalPrice = parseInt(sw2l_quantity * sw2l_unit);
                        }
                        else {
                            tolalPrice = parseInt(sw2l_quantity * sw2l_unit);
                        }
                        $("#sw2l_qty").val(totalqty);
                        $("#sw2l_Total_amount").val(tolalPrice);

                    }
                   
                }
                 else {
                    alert("Stock is not avilable");
                    $("#sw2l_quantity").val(0);
                    $("#sw2l_qty").val(0);
                    $("#sw2l_Total_amount").val(0);
                }
                calculetteSummary();
            });
            $("#sw5l_quantity").on('keyup', function () {

                var sw5l_quantity = parseInt($(this).val());
                var sw5l_unit = parseInt($("#sw5l_unit").val());
                var sw5l_stock = parseInt($("#sw5l_stock").val());
                if (sw5l_stock >= sw5l_quantity){
                    if (sw5l_quantity != "") {
                        if (sw5l_quantity >= "6") {
                            var modulsqty = sw5l_quantity % 6;
                            var diviqty = sw5l_quantity / 6;
                            var qty = Math.trunc(diviqty);
                            var totalqty = qty + "C" + " " + "&" + " " + modulsqty + "Pc"
                        }
                        else {
                            var totalqty = 0 + "C" + " " + "&" + " " + sw5l_quantity + "Pc"
                        }
                        if (sw5l_unit == "45") {
                            tolalPrice = parseInt(sw5l_quantity * sw5l_unit);
                        }
                        else {
                            tolalPrice = parseInt(sw5l_quantity * sw5l_unit);
                        }
                        $("#sw5l_qty").val(totalqty);
                        $("#sw5l_Total_amount").val(tolalPrice);

                    }
                   
                }
                 else {
                    alert("Stock is not avilable");
                    $("#sw5l_quantity").val(0);
                    $("#sw5l_qty").val(0);
                    $("#sw5l_Total_amount").val(0);
                }
                calculetteSummary();
            });
            $("#sw20l_quantity").on('keyup', function () {

                var sw20l_quantity = parseInt($(this).val());
                var sw20l_unit = parseInt($("#sw20l_unit").val());
                var sw20l_stock = parseInt($("#sw20l_stock").val());
                if (sw20l_stock >= sw20l_quantity){
                    if (sw20l_unit == "45") {
                        tolalPrice = parseInt(sw20l_quantity * sw20l_unit);
                    }
                    else {
                        tolalPrice = parseInt(sw20l_quantity * sw20l_unit);
                    }

                    $("#sw20l_Total_amount").val(tolalPrice);
                   
                }
               
                 else {
                    alert("Stock is not avilable");
                    $("#sw20l_quantity").val(0);
                    
                    $("#sw20l_Total_amount").val(0);
                }
                calculetteSummary();
            });


        });

        function calculetteSummary()
        {
            var swml250_Total_amount = $("#swml250_Total_amount").val();
            var sw5ml_Total_amount = $("#sw5ml_Total_amount").val();
            var sw1l_Total_amount = $("#sw1l_Total_amount").val();
            var sw15l_Total_amount = $("#sw15l_Total_amount").val();
            var sw2l_Total_amount = $("#sw2l_Total_amount").val();
            var sw5l_Total_amount = $("#sw5l_Total_amount").val();
            var sw20l_Total_amount = $("#sw20l_Total_amount").val();

            if (swml250_Total_amount == '' || swml250_Total_amount == 0) {
                swml250_Total_amount = 0;
            }
            if (sw5ml_Total_amount == '' || sw5ml_Total_amount == 0) {
                sw5ml_Total_amount = 0;
            }
            if (sw1l_Total_amount == '' || sw1l_Total_amount == 0) {
                sw1l_Total_amount = 0;
            }
            if (sw15l_Total_amount == '' || sw15l_Total_amount == 0) {
                sw15l_Total_amount = 0;
            }
            if (sw2l_Total_amount == '' || sw2l_Total_amount == 0) {
                sw2l_Total_amount = 0;
            }
            if (sw5l_Total_amount == '' || sw5l_Total_amount == 0) {
                sw5l_Total_amount = 0;
            }
            if (sw20l_Total_amount == '' || sw20l_Total_amount == 0) {
                sw20l_Total_amount = 0;
            }

            var allPrice = parseFloat(swml250_Total_amount) + parseFloat(sw5ml_Total_amount) + parseFloat(sw1l_Total_amount) + parseFloat(sw15l_Total_amount) + parseFloat(sw2l_Total_amount) + parseFloat(sw5l_Total_amount) + parseFloat(sw20l_Total_amount);
            var vatpercent =@Model.Setting.VatInParcent;
            var sdtpercent =@Model.Setting.SDInParcent;

            $("#STAmount").val(allPrice);
          
            var totalvat = (allPrice / 100) * vatpercent;
          

            $("#TSVat").val(parseFloat(totalvat).toFixed(2));
            var totalsd = (allPrice / 100) * sdtpercent;
         
            $("#TSSD").val(parseFloat(totalsd).toFixed(2));
            CalculateSummaryAmount();
    }
        function CalculateSummaryAmount() {
            var STAmount = $("#STAmount").val();
            var TSVat = $("#TSVat").val();
            var TSSD = $("#TSSD").val();
            var TransportCost = $("#TransportCost").val();
            var discount = $("#Discount").val();
            var cashReceive = $("#CashReceive").val();
            var dueAmount = $("#DueAmount").val();
            
            if (STAmount == '' || STAmount == 0) {
                STAmount = 0;
               
            }
            if (TSVat == '' || TSVat == 0) {
                TSVat = 0;
              
            }
            if (TSSD == '' || TSSD == 0) {
                TSSD = 0;
               
            }
            if (TransportCost == ''  || TransportCost == 0) {
                TransportCost = 0;
               
            }
            if (discount == '' || discount == 0) {
                discount = 0;               
            }
            else
            {
                $("#Discount").val($("#Discount").val());
            }
            if (cashReceive == '' ||cashReceive == 0) {
                cashReceive = 0;
               
            }
            if (dueAmount == '' || dueAmount == 0) {
                dueAmount = 0;
               
            }
          
          
            var netPrice = parseFloat(STAmount) + parseFloat(TSVat) + parseFloat(TSSD) + parseFloat(TransportCost);
            console.log(netPrice);
            var totaldiscount = (netPrice / 100) * discount;

            $("#NetTotal").val(parseFloat(netPrice - totaldiscount).toFixed(2));

            $("#DueAmount").val((parseFloat(cashReceive) - parseFloat($("#NetTotal").val())).toFixed(2));

        }
      
</script>
